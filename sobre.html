<!-- 
  Inspired by @konstantindenerz
  https://codepen.io/konstantindenerz/pen/bNGQpqJ
 -->

<div class="container">
  <div class="koi">
    <div class="koi-links">
      <div class="koi-link" style="--i: 1"></div>
      <div class="koi-link" style="--i: 2"></div>
      <div class="koi-link" style="--i: 3"></div>
      <div class="koi-link" style="--i: 4"></div>
      <div class="koi-link" style="--i: 5"></div>
      <div class="koi-link" style="--i: 6"></div>
      <div class="koi-link" style="--i: 7"></div>
      <div class="koi-link" style="--i: 8"></div>
      <div class="koi-link" style="--i: 9"></div>
      <div class="koi-link" style="--i: 10"></div>
      <div class="koi-link" style="--i: 11"></div>
      <div class="koi-link" style="--i: 12"></div>
    </div>
    <div class="koi-fins">
      <div class="koi-fin"></div>
      <div class="koi-fin"></div>
    </div>
    <div class="koi-tails">
      <div class="koi-tail"></div>
      <div class="koi-tail"></div>
    </div>
  </div>

  <div class="koi">
    <div class="koi-links">
      <div class="koi-link" style="--i: 1"></div>
      <div class="koi-link" style="--i: 2"></div>
      <div class="koi-link" style="--i: 3"></div>
      <div class="koi-link" style="--i: 4"></div>
      <div class="koi-link" style="--i: 5"></div>
      <div class="koi-link" style="--i: 6"></div>
      <div class="koi-link" style="--i: 7"></div>
      <div class="koi-link" style="--i: 8"></div>
      <div class="koi-link" style="--i: 9"></div>
      <div class="koi-link" style="--i: 10"></div>
      <div class="koi-link" style="--i: 11"></div>
      <div class="koi-link" style="--i: 12"></div>
    </div>
    <div class="koi-fins">
      <div class="koi-fin"></div>
      <div class="koi-fin"></div>
    </div>
    <div class="koi-tails">
      <div class="koi-tail"></div>
      <div class="koi-tail"></div>
    </div>
  </div>
</div>
*, *::before, *::after {
    padding: 0;
    margin: 0 auto;
    box-sizing: border-box;
}

html {
  /* make the whole thing responsive */
  font-size: min(16px, 3vmin);
}

body {
  background-color: #aaa;
  min-height: 100vh;
  display: grid;
  place-items: center;
  background-image: radial-gradient(circle, #e93e1e 5em, transparent 0);
  overflow: hidden;
}

.container {
  position: relative;
}

.koi {
  position: absolute;
  inset: -25em;
  filter: blur(0.5em) contrast(15);
  animation: koiRotate 24s var(--rotateDelay, 0s) infinite linear;
  
  &:nth-child(1) {
    --linkColor: white;
    --duration: 3s;
    background-color: black;
    mix-blend-mode: lighten;
  }

  &:nth-child(2) {
    --linkColor: black;
    --duration: 3.5s;
    --rotateDelay: -12s;
    background-color: white;
    mix-blend-mode: darken;
  }
}

@keyframes koiRotate {
  to { rotate: 1turn; }
}

.koi-links {
  position: absolute;
  left: 50%; top: 50%;
}

.koi-link {
  --w: calc(pow(var(--i) / 12, 2) * -2em - 0.25em);
  --delay: calc(var(--i) * var(--duration) * -0.15 - 20s);
  
  position: absolute;
  inset: var(--w) -3em;
  background-color: var(--linkColor);
  border-radius: 50%;
  animation: link var(--duration) var(--delay) infinite ease-in-out alternate;
}

@keyframes link {
  from { transform: rotate(calc(var(--i) * 10deg)) translateY(-8.5em); }
  to { transform: rotate(calc(var(--i) * 10deg)) translateY(-11.5em); }
}

.koi-fins {
  --i: 10;
  --delay: calc(var(--i) * var(--duration) * -0.15 - 20s);
  
  position: absolute;
  left: 50%; top: 50%;
  animation: link var(--duration) var(--delay) infinite ease-in-out alternate;
}

.koi-fin {
  position: absolute;
  inset: -3em -1.5em;
  background-color: var(--linkColor);
  border-radius: 50%;
  transform-origin: bottom;
  animation: fin var(--duration) infinite ease-in-out;

  &:nth-child(2) {
    --rz: 180deg;
  }
}

@keyframes fin {
  0%, 100% { transform: translateY(-3em) rotateX(var(--rz, 0deg)) rotate(10deg); }
  40% { transform: translateY(-3em) rotateX(var(--rz, 0deg)) rotate(-30deg); }
}

.koi-tails {
  --i: 1;
  --delay: calc(var(--i) * var(--duration) * -0.15 - 20s);
  
  position: absolute;
  left: 50%; top: 50%;
  animation: link var(--duration) var(--delay) infinite ease-in-out alternate;
}

.koi-tail {
  position: absolute;
  inset: -2em -1em;
  background-color: var(--linkColor);
  border-radius: 50%;
  transform-origin: bottom;
  animation: tail var(--duration) infinite ease-in-out;

  &:nth-child(2) {
    --rz: 180deg;
  }
}

@keyframes tail {
  0%, 100% { transform: translateY(-2em) rotateX(var(--rz, 0deg)) rotate(-60deg); }
  50% { transform: translateY(-2em) rotateX(var(--rz, 0deg)) rotate(-40deg); }
body }
